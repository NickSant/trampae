{"version":3,"sources":["../../src/helpers/multer.js"],"names":["storage","multer","diskStorage","destination","req","file","callback","filename","originalname","fileFilter","mimetype","console","log","e","res","json"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAAwB;AACxB;kBACgB,sBAAO;AACnB;AACAA,aAASC,iBAAOC,WAAP,CAAmB;AACxBC,qBAAY,qBAASC,GAAT,EAAcC,IAAd,EAAoBC,QAApB,EAA6B;AACrCA,qBAAS,IAAT,EAAe,UAAf,EADqC,CACV;AAC9B,SAHuB;AAIxBC,kBAAU,kBAACH,GAAD,EAAMC,IAAN,EAAYC,QAAZ,EAAyB;AAC/B;AACAA,qBAAS,IAAT,EAAcD,KAAKG,YAAnB;AACH;AAPuB,KAAnB,CAFU,EAUhB;AACHC,gBAAY,oBAACL,GAAD,EAAMC,IAAN,EAAYC,QAAZ,EAAwB;AAChC,YAAG;AACC;AACA,gBAAGD,KAAKK,QAAL,KAAkB,WAAlB,IAAiCL,KAAKK,QAAL,KAAkB,WAAnD,IAAkEL,KAAKK,QAAL,KAAkB,YAAvF,EAAqG;AACjGC,wBAAQC,GAAR,CAAY,oBAAZ;AACA,uBAAON,SAAS,IAAT,EAAe,IAAf,CAAP;AACH;;AAED,mBAAOA,SAAS,IAAT,EAAe,KAAf,CAAP,CAPD,CAO8B;AAEhC,SATD,CASC,OAAMO,CAAN,EAAQ;AACLF,oBAAQC,GAAR,CAAYC,CAAZ;AACAC,gBAAIC,IAAJ,CAASF,CAAT;AACH;AAEJ;;AA1BkB,CAAP,C","file":"multer.js","sourcesContent":["import multer from 'multer';\nimport path from 'path';//lib nativa\n//passando as nossas configurações em um objeto\nexport default (multer({\n    //armazenamento\n    storage: multer.diskStorage({\n        destination:function(req, file, callback){\n            callback(null, 'uploads/');//retorna o destino como sendo a pasta de uploads/\n        },\n        filename: (req, file, callback) => {\n            // Setamos o nome do arquivo que vai ser salvado no segundo paramêtro\n            callback(null,file.originalname);\n        }\n    }),//fim da configuração de storage\n    fileFilter: (req, file, callback) =>{\n        try{\n            //filtrando formatos aceitos\n            if(file.mimetype === 'image/png' || file.mimetype === 'image/jpg' || file.mimetype === 'image/jpeg' ){\n                console.log('passou pelo multer')\n                return callback(null, true);\n            }\n        \n            return callback(null, false);//significa que não aceita o arquivo\n\n        }catch(e){\n            console.log(e)\n            res.json(e);\n        }\n            \n    }  \n    \n}));"]}