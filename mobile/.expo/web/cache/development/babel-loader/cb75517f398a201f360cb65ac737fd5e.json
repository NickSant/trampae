{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SafeAreaProvider = SafeAreaProvider;\nexports.useSafeAreaInsets = useSafeAreaInsets;\nexports.useSafeAreaFrame = useSafeAreaFrame;\nexports.withSafeAreaInsets = withSafeAreaInsets;\nexports.useSafeArea = useSafeArea;\nexports.SafeAreaContext = exports.SafeAreaConsumer = exports.SafeAreaFrameContext = exports.SafeAreaInsetsContext = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _NativeSafeAreaProvider = _interopRequireDefault(require(\"./NativeSafeAreaProvider\"));\n\nvar _jsxFileName = \"/Users/janic/Developer/react-native-safe-area-context/src/SafeAreaContext.tsx\";\nvar SafeAreaInsetsContext = React.createContext(null);\nexports.SafeAreaInsetsContext = SafeAreaInsetsContext;\nvar SafeAreaFrameContext = React.createContext(null);\nexports.SafeAreaFrameContext = SafeAreaFrameContext;\n\nfunction SafeAreaProvider(_ref) {\n  var _ref2, _ref3, _initialMetrics$inset, _ref4, _initialMetrics$frame;\n\n  var children = _ref.children,\n      initialMetrics = _ref.initialMetrics,\n      initialSafeAreaInsets = _ref.initialSafeAreaInsets;\n  var parentInsets = useParentSafeAreaInsets();\n  var parentFrame = useParentSafeAreaFrame();\n\n  var _React$useState = React.useState((_ref2 = (_ref3 = (_initialMetrics$inset = initialMetrics === null || initialMetrics === void 0 ? void 0 : initialMetrics.insets) !== null && _initialMetrics$inset !== void 0 ? _initialMetrics$inset : initialSafeAreaInsets) !== null && _ref3 !== void 0 ? _ref3 : parentInsets) !== null && _ref2 !== void 0 ? _ref2 : null),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      insets = _React$useState2[0],\n      setInsets = _React$useState2[1];\n\n  var _React$useState3 = React.useState((_ref4 = (_initialMetrics$frame = initialMetrics === null || initialMetrics === void 0 ? void 0 : initialMetrics.frame) !== null && _initialMetrics$frame !== void 0 ? _initialMetrics$frame : parentFrame) !== null && _ref4 !== void 0 ? _ref4 : {\n    x: 0,\n    y: 0,\n    width: _reactNative.Dimensions.get('window').width,\n    height: _reactNative.Dimensions.get('window').height\n  }),\n      _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n      frame = _React$useState4[0],\n      setFrame = _React$useState4[1];\n\n  var onInsetsChange = React.useCallback(function (event) {\n    if (event.nativeEvent.frame != null) {\n      setFrame(event.nativeEvent.frame);\n    }\n\n    setInsets(event.nativeEvent.insets);\n  }, []);\n  return React.createElement(_NativeSafeAreaProvider.default, {\n    style: styles.fill,\n    onInsetsChange: onInsetsChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, insets != null ? React.createElement(SafeAreaFrameContext.Provider, {\n    value: frame,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, React.createElement(SafeAreaInsetsContext.Provider, {\n    value: insets,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, children)) : null);\n}\n\nvar styles = _reactNative.StyleSheet.create({\n  fill: {\n    flex: 1\n  }\n});\n\nfunction useParentSafeAreaInsets() {\n  return React.useContext(SafeAreaInsetsContext);\n}\n\nfunction useParentSafeAreaFrame() {\n  return React.useContext(SafeAreaFrameContext);\n}\n\nfunction useSafeAreaInsets() {\n  var safeArea = React.useContext(SafeAreaInsetsContext);\n\n  if (safeArea == null) {\n    throw new Error('No safe area insets value available. Make sure you are rendering `<SafeAreaProvider>` at the top of your app.');\n  }\n\n  return safeArea;\n}\n\nfunction useSafeAreaFrame() {\n  var frame = React.useContext(SafeAreaFrameContext);\n\n  if (frame == null) {\n    throw new Error('No safe area frame value available. Make sure you are rendering `<SafeAreaProvider>` at the top of your app.');\n  }\n\n  return frame;\n}\n\nfunction withSafeAreaInsets(WrappedComponent) {\n  var _this = this;\n\n  return function (props) {\n    return React.createElement(SafeAreaConsumer, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }\n    }, function (insets) {\n      return React.createElement(WrappedComponent, (0, _extends2.default)({}, props, {\n        insets: insets,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 20\n        }\n      }));\n    });\n  };\n}\n\nfunction useSafeArea() {\n  return useSafeAreaInsets();\n}\n\nvar SafeAreaConsumer = SafeAreaInsetsContext.Consumer;\nexports.SafeAreaConsumer = SafeAreaConsumer;\nvar SafeAreaContext = SafeAreaInsetsContext;\nexports.SafeAreaContext = SafeAreaContext;","map":{"version":3,"sources":["SafeAreaContext.tsx"],"names":["SafeAreaInsetsContext","React","SafeAreaFrameContext","children","initialMetrics","initialSafeAreaInsets","parentInsets","useParentSafeAreaInsets","parentFrame","useParentSafeAreaFrame","insets","setInsets","frame","setFrame","x","y","width","Dimensions","height","onInsetsChange","event","styles","StyleSheet","fill","flex","safeArea","useSafeAreaInsets","SafeAreaConsumer","SafeAreaContext"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, Dimensions } from 'react-native';\nimport NativeSafeAreaProvider from './NativeSafeAreaProvider';\nimport { EdgeInsets, InsetChangedEvent, Metrics, Rect } from './SafeArea.types';\n\nexport const SafeAreaInsetsContext = React.createContext<EdgeInsets | null>(\n  null,\n);\n\nexport const SafeAreaFrameContext = React.createContext<Rect | null>(null);\n\nexport interface SafeAreaViewProps {\n  children?: React.ReactNode;\n  initialMetrics?: Metrics | null;\n  /**\n   * @deprecated\n   */\n  initialSafeAreaInsets?: EdgeInsets | null;\n}\n\nexport function SafeAreaProvider({\n  children,\n  initialMetrics,\n  initialSafeAreaInsets,\n}: SafeAreaViewProps) {\n  const parentInsets = useParentSafeAreaInsets();\n  const parentFrame = useParentSafeAreaFrame();\n  const [insets, setInsets] = React.useState<EdgeInsets | null>(\n    initialMetrics?.insets ?? initialSafeAreaInsets ?? parentInsets ?? null,\n  );\n  const [frame, setFrame] = React.useState<Rect>(\n    initialMetrics?.frame ??\n      parentFrame ?? {\n        // Backwards compat so we render anyway if we don't have frame.\n        x: 0,\n        y: 0,\n        width: Dimensions.get('window').width,\n        height: Dimensions.get('window').height,\n      },\n  );\n  const onInsetsChange = React.useCallback((event: InsetChangedEvent) => {\n    // Backwards compat with old native code that won't send frame.\n    if (event.nativeEvent.frame != null) {\n      setFrame(event.nativeEvent.frame);\n    }\n    setInsets(event.nativeEvent.insets);\n  }, []);\n\n  return (\n    <NativeSafeAreaProvider style={styles.fill} onInsetsChange={onInsetsChange}>\n      {insets != null ? (\n        <SafeAreaFrameContext.Provider value={frame}>\n          <SafeAreaInsetsContext.Provider value={insets}>\n            {children}\n          </SafeAreaInsetsContext.Provider>\n        </SafeAreaFrameContext.Provider>\n      ) : null}\n    </NativeSafeAreaProvider>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fill: { flex: 1 },\n});\n\nfunction useParentSafeAreaInsets(): EdgeInsets | null {\n  return React.useContext(SafeAreaInsetsContext);\n}\n\nfunction useParentSafeAreaFrame(): Rect | null {\n  return React.useContext(SafeAreaFrameContext);\n}\n\nexport function useSafeAreaInsets(): EdgeInsets {\n  const safeArea = React.useContext(SafeAreaInsetsContext);\n  if (safeArea == null) {\n    throw new Error(\n      'No safe area insets value available. Make sure you are rendering `<SafeAreaProvider>` at the top of your app.',\n    );\n  }\n  return safeArea;\n}\n\nexport function useSafeAreaFrame(): Rect {\n  const frame = React.useContext(SafeAreaFrameContext);\n  if (frame == null) {\n    throw new Error(\n      'No safe area frame value available. Make sure you are rendering `<SafeAreaProvider>` at the top of your app.',\n    );\n  }\n  return frame;\n}\n\nexport function withSafeAreaInsets<T>(\n  WrappedComponent: React.ComponentType<T>,\n) {\n  return (props: T) => (\n    <SafeAreaConsumer>\n      {(insets) => <WrappedComponent {...props} insets={insets} />}\n    </SafeAreaConsumer>\n  );\n}\n\n/**\n * @deprecated\n */\nexport function useSafeArea(): EdgeInsets {\n  return useSafeAreaInsets();\n}\n\n/**\n * @deprecated\n */\nexport const SafeAreaConsumer = SafeAreaInsetsContext.Consumer;\n\n/**\n * @deprecated\n */\nexport const SafeAreaContext = SafeAreaInsetsContext;\n"]},"metadata":{},"sourceType":"script"}