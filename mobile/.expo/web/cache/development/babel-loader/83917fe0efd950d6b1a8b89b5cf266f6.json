{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\tcc\\\\trampae\\\\mobile\\\\src\\\\pages\\\\Login\\\\index.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport estilo from \"./styles\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ToastAndroid from \"react-native-web/dist/exports/ToastAndroid\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport { useNavigation } from '@react-navigation/native';\nimport logoImg from \"../../assets/icon.png\";\nimport { TextInput, ScrollView } from 'react-native-gesture-handler';\nimport api from \"../../services/api\";\nimport baes64 from 'react-native-base64';\nimport base64 from 'react-native-base64';\nexport default function Index() {\n  var nav = useNavigation();\n\n  function goToRegister() {\n    nav.navigate('register');\n  }\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      mail = _useState2[0],\n      setMail = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pass = _useState4[0],\n      setPass = _useState4[1];\n\n  function submit() {\n    AsyncStorage.clear();\n    var hash = \"Basic \" + base64.encode(mail + \":\" + pass);\n    fetch(api + \"/login\", {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'authorization': hash\n      }\n    }).then(function (res) {\n      res.json().then(function (data) {\n        console.log(data);\n        if (data.Error) return ToastAndroid.show('Usuário ou senha incorretos', ToastAndroid.LONG);\n        var user = data.user;\n        var token = data.token;\n        if (!user || !token) return ToastAndroid.show('Ocorreu algum erro..\\nTente novamente mais tarde', ToastAndroid.LONG);\n        AsyncStorage.setItem('token', token);\n        ToastAndroid.show(\"Bem vindo novamente \" + user.name, ToastAndroid.LONG);\n        nav.navigate('home');\n      }).catch(function (e) {\n        console.log(e);\n      });\n    });\n  }\n\n  useEffect(function () {\n    console.log('iniciou');\n  }, []);\n  return React.createElement(View, {\n    style: estilo.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: estilo.header,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    style: estilo.img_logo,\n    source: logoImg,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }), React.createElement(Text, {\n    style: estilo.p_header,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, \"Trampa\\xEA\")), React.createElement(ScrollView, {\n    collapsable: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: estilo.container_login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: estilo.title_login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, \"Login\"), React.createElement(View, {\n    style: estilo.input_group,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, React.createElement(TextInput, {\n    onChange: function onChange(e) {\n      return setMail(e.nativeEvent.text);\n    },\n    keyboardType: \"email-address\",\n    style: estilo.input,\n    autoCapitalize: \"none\",\n    allowFontScaling: false,\n    placeholder: \"Email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  })), React.createElement(View, {\n    style: estilo.input_group,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, React.createElement(TextInput, {\n    onChange: function onChange(e) {\n      return setPass(e.nativeEvent.text);\n    },\n    keyboardType: \"visible-password\",\n    multiline: false,\n    style: estilo.input,\n    secureTextEntry: true,\n    autoCapitalize: \"none\",\n    allowFontScaling: false,\n    placeholder: \"Senha\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  })), React.createElement(TouchableOpacity, {\n    style: estilo.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    onPress: submit,\n    style: estilo.p_button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, \"Entrar\")), React.createElement(TouchableOpacity, {\n    onPress: goToRegister,\n    style: estilo.link_cadastro,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: estilo.p_link,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, \"N\\xE3o possui um cadastro?\")))));\n}","map":{"version":3,"sources":["C:/tcc/trampae/mobile/src/pages/Login/index.js"],"names":["React","useEffect","useState","axios","estilo","useNavigation","logoImg","TextInput","ScrollView","api","baes64","base64","Index","nav","goToRegister","navigate","mail","setMail","pass","setPass","submit","AsyncStorage","clear","hash","encode","fetch","method","headers","then","res","json","data","console","log","Error","ToastAndroid","show","LONG","user","token","setItem","name","catch","e","container","header","img_logo","p_header","container_login","title_login","input_group","nativeEvent","text","input","button","p_button","link_cadastro","p_link"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\n\r\nimport estilo from './styles';\r\nimport { View, Text, Image, Button, TouchableOpacity, ToastAndroid, AsyncStorage} from 'react-native';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport logoImg from '../../assets/icon.png';\r\nimport { TextInput, ScrollView } from 'react-native-gesture-handler';\r\n\r\n\r\nimport api from '../../services/api';\r\nimport baes64 from 'react-native-base64';\r\nimport base64 from 'react-native-base64';\r\n\r\n\r\nexport default function Index(){\r\n\r\n    const nav = useNavigation();\r\n\r\n    function goToRegister(){\r\n        nav.navigate('register')\r\n    }\r\n\r\n    const [mail, setMail] = useState('');\r\n    const [pass, setPass] = useState('');\r\n\r\n    function submit(){\r\n        AsyncStorage.clear();\r\n        const hash = `Basic ${base64.encode(`${mail}:${pass}`)}`;\r\n\r\n        fetch(`${api}/login`,{\r\n            method:'POST',\r\n            headers:{\r\n                \"Content-Type\": \"application/json\",\r\n                'authorization': hash,\r\n            },\r\n        }).then(res =>{\r\n            res.json().then(data =>{\r\n                console.log(data);\r\n                if(data.Error)\r\n                    return ToastAndroid.show('Usuário ou senha incorretos', ToastAndroid.LONG);\r\n\r\n                const user = data.user;\r\n                const token = data.token;\r\n\r\n                if(!user || !token)\r\n                    return ToastAndroid.show('Ocorreu algum erro..\\nTente novamente mais tarde', ToastAndroid.LONG);\r\n\r\n                AsyncStorage.setItem('token', token);\r\n\r\n                ToastAndroid.show(`Bem vindo novamente ${user.name}`, ToastAndroid.LONG);\r\n                nav.navigate('home');\r\n                \r\n            })\r\n            .catch(e =>{\r\n                console.log(e);\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    useEffect(() =>{\r\n        console.log('iniciou');\r\n    },[])\r\n\r\n    \r\n\r\n    return(\r\n        <View style={estilo.container}>\r\n            <View style={estilo.header}>\r\n                <Image style={estilo.img_logo} source={logoImg}/>\r\n                <Text style={estilo.p_header}>Trampaê</Text>\r\n            </View>\r\n            <ScrollView collapsable={false}>\r\n                <View style={estilo.container_login}>\r\n                    <Text style={estilo.title_login}>Login</Text>\r\n                    <View style={estilo.input_group}>\r\n                        \r\n                        <TextInput \r\n                            onChange={e => setMail(e.nativeEvent.text)}\r\n                            keyboardType=\"email-address\" \r\n                            style={estilo.input}\r\n                            autoCapitalize=\"none\"\r\n                            allowFontScaling={false}\r\n                            placeholder='Email'\r\n                        />\r\n\r\n                        \r\n                    </View>\r\n                    <View style={estilo.input_group}>\r\n                        <TextInput \r\n                            onChange={e => setPass(e.nativeEvent.text)}\r\n                            keyboardType=\"visible-password\" \r\n                            multiline={false}  \r\n                            style={estilo.input}\r\n                            secureTextEntry={true}\r\n                            autoCapitalize=\"none\"\r\n                            allowFontScaling={false}\r\n                            placeholder='Senha'\r\n                        />\r\n                    </View>\r\n                    <TouchableOpacity style={estilo.button}>\r\n                        <Text onPress={submit} style={estilo.p_button}>Entrar</Text>\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity onPress={goToRegister} style={estilo.link_cadastro}>\r\n                        <Text style={estilo.p_link}>Não possui um cadastro?</Text>\r\n                    </TouchableOpacity>\r\n            \r\n                </View>\r\n           </ScrollView> \r\n        </View>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}